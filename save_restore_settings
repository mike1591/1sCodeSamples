
#Область Настройки

Функция КлючОбъектаНастроек()
	Возврат "Обмен.ТоргСервис" ;
КонецФункции 

Процедура ВосстановитьТЧ(Настройки,ИмяТЧ)
	ЗначениеСвойства = Неопределено  ;
	Если Настройки.Свойство(ИмяТЧ,ЗначениеСвойства) Тогда 
		ЭтотОбъект[ИмяТЧ].Загрузить(ЗначениеСвойства);
	КонецЕсли ;
	
КонецПроцедуры 

Функция СохранитьНастройкиНаСервере() Экспорт 
	Настройки = Новый Структура ;
	Настройки.вставить("Выгрузка",Выгрузка.Выгрузить());
	Настройки.вставить("Загрузка",Загрузка.Выгрузить());
	Настройки.вставить("КаталогЛогов",КаталогЛогов);
	Настройки.вставить("ЛогНаСервере",ЛогНаСервере);
	Настройки.вставить("ДлинаСтрокиЧека",ДлинаСтрокиЧека);
	Настройки.вставить("ДнейОборотаДляРасчетаОстатков",ДнейОборотаДляРасчетаОстатков);
	Настройки.вставить("РазделительДопТекста",РазделительДопТекста);
	Настройки.вставить("ВидЦенУчет",ВидЦенУчет);
	Настройки.вставить("РозничныйПокупатель",РозничныйПокупатель);
	Настройки.вставить("ШаблонЦенника",ШаблонЦенника);
	
	НастройкиВБазе =  Новый ХранилищеЗначения(Настройки) ;	
	
	ХранилищеСистемныхНастроек.Сохранить(КлючОбъектаНастроек(),,НастройкиВБазе,,"ts.unf") ;
КонецФункции 	

Функция ВосстановитьНастройкиОбмена() Экспорт
	НастройкиВБазе =  ХранилищеСистемныхНастроек.Загрузить(КлючОбъектаНастроек(),,,"ts.unf") ;
	
	Если НастройкиВБазе <> Неопределено Тогда  
		
		Настройки = НастройкиВБазе.Получить();
		Если ТипЗнч(Настройки) = Тип("Структура") Тогда 
			ЗаполнитьЗначенияСвойств(ЭтотОбъект,Настройки) ;
			
			ВосстановитьТЧ(Настройки,"Выгрузка") ;	
			ВосстановитьТЧ(Настройки,"Загрузка");
		КонецЕсли ;
	КонецЕсли ;
КонецФункции 	

#КонецОбласти
